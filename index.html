<!DOCTYPE html>
<html>
    <head>
        <title>Exercise call API</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
    </head>
    <style type="text/css">
        .init{
            width 75%;
            margin: 0 auto;
            padding: 45px;
       }
       .table{
           text-align: center;
       }
       h2{
           text-align: center;
           margin-bottom: 27px;
           
       }
    </style>

<body>
    <div class="init">
        <h2>Exercise call API with promise</h2>
        <table class="table table-success table-striped" id="main">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>UserID</th>
                    <th>Title</th>
                    <th>Status</th>
                </tr>
            </thead>

        </table>
    </div>
    <div>
        <select id="choice">
            <option value="0">Filter status</option>
            <option value="1">Not completed</option>
            <option value="2">Completed </option>
        </select>
    </div>
    <script type="text/javascript">
        let html=""
        let element = document.createElement("tbody")
        element.setAttribute("id","body")
        const URL = "https://jsonplaceholder.typicode.com/todos"
        const promise = new Promise((resolve,reject) => {
            resolve(fetch(URL))
        })
            promise.then(response => response.json())
            .then(function(json){
                console.log(json)
                const selt = document.getElementById("choice")
                json.forEach(function (data,index) {
                    if(index < 10){
                        html += "<tr><td>"+data.id+"</td><td>"+data.userId+"</td><td>"+data.title+"</td><td>"+data.completed+"</td></tr>"
                    }
                    
                })
                element.innerHTML = html
                document.getElementById("main").appendChild(element)
                selt.addEventListener("change")
            })

    </script>
</body>
</html>